*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  background: #f8fafc;
  color: #1e293b;
  display: flex;
  justify-content: center;
  padding: 24px 16px;
}
.container { max-width: 980px; width: 100%; }

h1 {
  font-size: 22px; font-weight: 700; text-align: center;
  margin-bottom: 12px; color: #0f172a; letter-spacing: -0.3px;
}

/* Controls */
.controls {
  display: flex; align-items: center; justify-content: center;
  gap: 10px; margin-bottom: 10px;
}
.controls button {
  font-family: inherit; font-size: 13px; font-weight: 600;
  padding: 6px 14px; border: 1.5px solid #cbd5e1; border-radius: 6px;
  background: #fff; color: #334155; cursor: pointer; transition: all 0.15s;
}
.controls button:hover:not(:disabled) { background: #f1f5f9; border-color: #94a3b8; }
.controls button:disabled { opacity: 0.4; cursor: default; }
.controls button.playing { background: #fef3c7; border-color: #d97706; color: #92400e; }
#step-label { font-size: 13px; font-weight: 600; color: #64748b; min-width: 80px; text-align: center; }

/* Narration */
.narration {
  background: #fff; border: 1.5px solid #e2e8f0; border-radius: 8px;
  padding: 10px 16px; font-size: 13px; line-height: 1.5; color: #334155;
  min-height: 42px; margin-bottom: 12px; transition: all 0.3s;
}
.narration.hl-select  { background: #eff6ff; border-color: #93c5fd; }
.narration.hl-expand  { background: #f0fdf4; border-color: #86efac; }
.narration.hl-eval    { background: #faf5ff; border-color: #c4b5fd; }
.narration.hl-backup  { background: #fffbeb; border-color: #fcd34d; }

/* SVG */
#tree {
  width: 100%;
  height: auto;
  display: block;
  background: transparent;
}

/* Increase text inside tree nodes (label + N/prior) */
#layer-nodes g > text:first-of-type {
  font-size: 20px !important;
  font-weight: 800 !important;
}

#layer-nodes g > text:nth-of-type(2) {
  font-size: 15px !important;
  font-weight: 700 !important;
}

/* Legend */
.legend {
  display: flex; justify-content: center; gap: 20px;
  margin-top: 10px; font-size: 15px; color: #64748b;
}
.legend-item { display: flex; align-items: center; gap: 5px; }
.swatch {
  display: inline-block; width: 18px; height: 18px;
  border-radius: 3px; border: 1.5px solid;
}
.sel-swatch  { background: #dbeafe; border-color: #2563eb; }
.exp-swatch  { background: #dcfce7; border-color: #16a34a; }
.eval-swatch { background: #ede9fe; border-color: #7c3aed; }
.back-swatch { background: #fef3c7; border-color: #d97706; }
