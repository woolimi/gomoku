---
group: "About Project"
icon: pi-send
---

# WebSocket JSON Protocol

## Endpoints

- Game: `/ws`
- Debug: `/ws/debug`

The frontend picks minimax vs alphazero by `settings.ai` and connects to one of:
- Local: `ws://localhost:{PORT}/ws`
- Production: `wss://sungyongcho.com/minimax/ws` or `wss://sungyongcho.com/alphazero/ws`

## Request Messages

### 1) `move`, `evaluate`, `test`

These three use one common payload shape:

```json
{
  "type": "move",
  "difficulty": "easy | medium | hard",
  "nextPlayer": "X | O",
  "goal": 5,
  "enableCapture": true,
  "enableDoubleThreeRestriction": true,
  "lastPlay": {
    "coordinate": { "x": 9, "y": 10 },
    "stone": "X"
  },
  // `lastPlay.coordinate` is required for `evaluate`.
  "board": [[".", ".", "..."]],
  // Full board state is sent every request (board-state stateless handling; minimax TT/difficulty are per-connection state).
  "scores": [
    { "player": "X", "score": 3 },
    { "player": "O", "score": 1 }
  ],
  // `scores` is capture score by player.
  // `test` is used by `front/pages/test.vue` (minimax-focused check path).
}
```

`lastPlay` semantics differ by request type:

- `move`: `lastPlay` is the actual last move played. It can be omitted for the first AI move request.
- `evaluate`: `lastPlay.coordinate` is **required** and specifies the position to evaluate
  (not the actual last move played). Both backends evaluate the resulting position after
  placing a stone at this coordinate.
- `test`: same semantics as `move`.

`test` note: in the minimax backend, `difficulty` is currently ignored and the handler always uses the hard PVS path.

### 2) `reset`

```json
{ "type": "reset" }
```

## Response Messages

### 1) `move` (also used for `test`)

```json
{
  "type": "move",
  "status": "success",
  "lastPlay": {
    "coordinate": { "x": 9, "y": 10 },
    "stone": "O"
  },
  "board": [[".", ".", "..."]],
  "capturedStones": [
    { "x": 1, "y": 1, "stone": "X" }
  ],
  "executionTime": { "s": 0.12, "ms": 120.0, "ns": 120000000 },
  // Optional by backend: `scores`, `evalScores`
}
```

### 2) `evaluate`

```json
{
  "type": "evaluate",
  "evalScores": [
    { "player": "O", "evalScores": 0.13, "percentage": 43.5 },
    { "player": "X", "evalScores": -0.13, "percentage": 56.5 }
  ],
  // Frontend mainly uses `player` + `percentage`.
}
```

### 3) `error`

```json
{
  "type": "error",
  "error": "Unknown type"
}
```
